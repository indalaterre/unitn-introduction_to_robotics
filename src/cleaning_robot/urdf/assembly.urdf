<?xml version="1.0" ?>
<!--
  Cleaning Robot Assembly URDF
  ============================
  8-DoF Redundant Manipulator:
  - 2-DoF Pan-Tilt Platform (roll/pitch)
  - 6-DoF Unitree Z1 Arm
  
  Frame definitions:
  - world: Fixed world frame
  - table: Table surface frame (where cleaning happens)
  - platform_base: Base of the pan-tilt platform
  - platform_roll_link: After roll joint
  - platform_pitch_link: After pitch joint (top of platform)
  - z1_base: Base of Z1 arm (fixed to platform top)
  - link1-6: Z1 arm links
  - ee_link: End-effector link
  - tool_tip: Tool center point (TCP)
  
  Joint order (q0-q7):
  0: platform_roll  (X-axis rotation)
  1: platform_pitch (Y-axis rotation)
  2: z1_joint1 (shoulder yaw)
  3: z1_joint2 (shoulder pitch)
  4: z1_joint3 (elbow pitch)
  5: z1_joint4 (wrist yaw)
  6: z1_joint5 (wrist pitch)
  7: z1_joint6 (wrist roll)
-->
<robot name="cleaning_robot">
    <!-- Materials -->
    <material name="grey">
        <color rgba="0.5 0.5 0.5 1"/>
    </material>
    <material name="dark_grey">
        <color rgba="0.3 0.3 0.3 1"/>
    </material>
    <material name="blue">
        <color rgba="0.2 0.4 0.8 1"/>
    </material>
    <material name="orange">
        <color rgba="0.9 0.5 0.1 1"/>
    </material>
    <material name="white">
        <color rgba="0.9 0.9 0.9 1"/>
    </material>

    <!-- World frame -->
    <link name="world"/>

    <!-- Table link (represents the cleaning surface) -->
    <joint name="table_fixed" type="fixed">
        <parent link="world"/>
        <child link="table"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <link name="table">
        <visual>
            <origin xyz="0.4 0 -0.025" rpy="0 0 0"/>
            <geometry>
                <box size="1.0 1.0 0.05"/>
            </geometry>
            <material name="grey"/>
        </visual>
        <collision>
            <origin xyz="0.4 0 -0.025" rpy="0 0 0"/>
            <geometry>
                <box size="1.0 1.0 0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="10.0"/>
            <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0"/>
        </inertial>
    </link>

    <!-- Platform base (fixed to world, elevated) -->
    <joint name="platform_base_fixed" type="fixed">
        <parent link="world"/>
        <child link="platform_base"/>
        <origin xyz="0 0 0.1" rpy="0 0 0"/>
    </joint>

    <link name="platform_base">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.08" length="0.1"/>
            </geometry>
            <material name="dark_grey"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.08" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
    </link>

    <!-- Platform Roll Joint (rotation about X-axis) -->
    <joint name="platform_roll" type="revolute">
        <parent link="platform_base"/>
        <child link="platform_roll_link"/>
        <origin xyz="0 0 0.05" rpy="0 0 0"/>
        <axis xyz="1 0 0"/>
        <limit lower="-0.785" upper="0.785" effort="50.0" velocity="2.0"/>
        <dynamics damping="0.5" friction="0.1"/>
    </joint>

    <link name="platform_roll_link">
        <visual>
            <origin xyz="0 0 0.025" rpy="0 0 0"/>
            <geometry>
                <box size="0.12 0.08 0.05"/>
            </geometry>
            <material name="blue"/>
        </visual>
        <collision>
            <origin xyz="0 0 0.025" rpy="0 0 0"/>
            <geometry>
                <box size="0.12 0.08 0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.5"/>
            <origin xyz="0 0 0.025"/>
            <inertia ixx="0.002" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>
        </inertial>
    </link>

    <!-- Platform Pitch Joint (rotation about Y-axis) -->
    <joint name="platform_pitch" type="revolute">
        <parent link="platform_roll_link"/>
        <child link="platform_pitch_link"/>
        <origin xyz="0 0 0.05" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-0.785" upper="0.785" effort="50.0" velocity="2.0"/>
        <dynamics damping="0.5" friction="0.1"/>
    </joint>

    <link name="platform_pitch_link">
        <visual>
            <origin xyz="0 0 0.02" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.06" length="0.04"/>
            </geometry>
            <material name="blue"/>
        </visual>
        <collision>
            <origin xyz="0 0 0.02" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.06" length="0.04"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.3"/>
            <origin xyz="0 0 0.02"/>
            <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
        </inertial>
    </link>

    <!-- Z1 Base (fixed to platform top) -->
    <joint name="z1_base_fixed" type="fixed">
        <parent link="platform_pitch_link"/>
        <child link="z1_base"/>
        <origin xyz="0 0 0.04" rpy="0 0 0"/>
    </joint>

    <link name="z1_base">
        <visual>
            <origin xyz="0 0 0.02" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.04"/>
            </geometry>
            <material name="dark_grey"/>
        </visual>
        <collision>
            <origin xyz="0 0 0.02" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.04"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.8"/>
            <origin xyz="0 0 0.02"/>
            <inertia ixx="0.002" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>
        </inertial>
    </link>

    <!-- ==================== UNITREE Z1 ARM (6-DoF) ==================== -->
    <!-- Joint 1: Shoulder Yaw (Z-axis) -->
    <joint name="z1_joint1" type="revolute">
        <parent link="z1_base"/>
        <child link="z1_link1"/>
        <origin xyz="0 0 0.04" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="-2.618" upper="2.618" effort="33.5" velocity="3.14"/>
        <dynamics damping="0.1" friction="0.05"/>
    </joint>

    <link name="z1_link1">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.04" length="0.07"/>
            </geometry>
            <material name="orange"/>
        </visual>
        <collision>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.04" length="0.07"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="1.2"/>
            <origin xyz="0 0 0.035"/>
            <inertia ixx="0.003" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.002"/>
        </inertial>
    </link>

    <!-- Joint 2: Shoulder Pitch (Y-axis) -->
    <joint name="z1_joint2" type="revolute">
        <parent link="z1_link1"/>
        <child link="z1_link2"/>
        <origin xyz="0 0 0.07" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-2.094" upper="2.094" effort="33.5" velocity="3.14"/>
        <dynamics damping="0.1" friction="0.05"/>
    </joint>

    <link name="z1_link2">
        <visual>
            <origin xyz="0.1 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.03" length="0.2"/>
            </geometry>
            <material name="white"/>
        </visual>
        <collision>
            <origin xyz="0.1 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.03" length="0.2"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.9"/>
            <origin xyz="0.1 0 0"/>
            <inertia ixx="0.004" ixy="0" ixz="0" iyy="0.004" iyz="0" izz="0.001"/>
        </inertial>
    </link>

    <!-- Joint 3: Elbow Pitch (Y-axis) -->
    <joint name="z1_joint3" type="revolute">
        <parent link="z1_link2"/>
        <child link="z1_link3"/>
        <origin xyz="0.2 0 0" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-2.792" upper="2.792" effort="33.5" velocity="3.14"/>
        <dynamics damping="0.1" friction="0.05"/>
    </joint>

    <link name="z1_link3">
        <visual>
            <origin xyz="0.1 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.025" length="0.2"/>
            </geometry>
            <material name="white"/>
        </visual>
        <collision>
            <origin xyz="0.1 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.025" length="0.2"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.7"/>
            <origin xyz="0.1 0 0"/>
            <inertia ixx="0.003" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0008"/>
        </inertial>
    </link>

    <!-- Joint 4: Wrist Yaw (Z-axis) -->
    <joint name="z1_joint4" type="revolute">
        <parent link="z1_link3"/>
        <child link="z1_link4"/>
        <origin xyz="0.2 0 0" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="-2.967" upper="2.967" effort="6.0" velocity="6.28"/>
        <dynamics damping="0.05" friction="0.02"/>
    </joint>

    <link name="z1_link4">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <sphere radius="0.025"/>
            </geometry>
            <material name="orange"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <sphere radius="0.025"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.3"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.0003" ixy="0" ixz="0" iyy="0.0003" iyz="0" izz="0.0003"/>
        </inertial>
    </link>

    <!-- Joint 5: Wrist Pitch (Y-axis) -->
    <joint name="z1_joint5" type="revolute">
        <parent link="z1_link4"/>
        <child link="z1_link5"/>
        <origin xyz="0.05 0 0" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-1.745" upper="1.745" effort="6.0" velocity="6.28"/>
        <dynamics damping="0.05" friction="0.02"/>
    </joint>

    <link name="z1_link5">
        <visual>
            <origin xyz="0.025 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.02" length="0.05"/>
            </geometry>
            <material name="white"/>
        </visual>
        <collision>
            <origin xyz="0.025 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.02" length="0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.2"/>
            <origin xyz="0.025 0 0"/>
            <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
        </inertial>
    </link>

    <!-- Joint 6: Wrist Roll (X-axis) -->
    <joint name="z1_joint6" type="revolute">
        <parent link="z1_link5"/>
        <child link="z1_link6"/>
        <origin xyz="0.05 0 0" rpy="0 0 0"/>
        <axis xyz="1 0 0"/>
        <limit lower="-3.14159" upper="3.14159" effort="6.0" velocity="6.28"/>
        <dynamics damping="0.05" friction="0.02"/>
    </joint>

    <link name="z1_link6">
        <visual>
            <origin xyz="0.02 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.018" length="0.04"/>
            </geometry>
            <material name="dark_grey"/>
        </visual>
        <collision>
            <origin xyz="0.02 0 0" rpy="0 1.5708 0"/>
            <geometry>
                <cylinder radius="0.018" length="0.04"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.15"/>
            <origin xyz="0.02 0 0"/>
            <inertia ixx="0.00005" ixy="0" ixz="0" iyy="0.00005" iyz="0" izz="0.00005"/>
        </inertial>
    </link>

    <!-- End-effector link -->
    <joint name="ee_fixed" type="fixed">
        <parent link="z1_link6"/>
        <child link="ee_link"/>
        <origin xyz="0.04 0 0" rpy="0 0 0"/>
    </joint>

    <link name="ee_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="0.02 0.04 0.02"/>
            </geometry>
            <material name="orange"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="0.02 0.04 0.02"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.1"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.00002" ixy="0" ixz="0" iyy="0.00002" iyz="0" izz="0.00002"/>
        </inertial>
    </link>

    <!-- Tool tip (TCP - Tool Center Point) -->
    <!-- Convention: tool z-axis points DOWN toward table for cleaning -->
    <joint name="tool_tip_fixed" type="fixed">
        <parent link="ee_link"/>
        <child link="tool_tip"/>
        <!-- Rotate so tool z-axis points in -Z world direction when arm is in home config -->
        <origin xyz="0.03 0 0" rpy="0 1.5708 0"/>
    </joint>

    <link name="tool_tip">
        <visual>
            <origin xyz="0 0 0.02" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.015" length="0.04"/>
            </geometry>
            <material name="blue"/>
        </visual>
        <inertial>
            <mass value="0.05"/>
            <origin xyz="0 0 0.02"/>
            <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
        </inertial>
    </link>

</robot>
